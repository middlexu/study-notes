# 适配器模式

> `适配器模式（Adapter Pattern）`属于`结构型模式`的一种，把一个类的接口变成客户端所期待的另一种接口，从而使原本接口不匹配而无法一起工作的两个类能够在一起工作...



## 概述

当你想使用一个已经存在的类，而它的接口不符合你的需求，或者你想创建一个可重用的类（与不兼容接口无关的类），这时候可以考虑使用`适配器模式`。同时它也是一种包装模式，它与`装饰模式`同样具有包装的功能。


![适配器模式.png](https://i.loli.net/2019/07/07/5d22152d08a9725294.png)


## 案例

笔者算是小米的忠实用户了，从大学期间起至今都是购买的小米，期间发现`小米5`在推出的时候，它会送一个`type-c`的转接口给我们，那会`type-c`数据线应该还不算普及，这种做法还是蛮好的，在使用转接口后`Micro USB`得以重复利用，这样一来即使原装的米5数据线丢了也没关系，只要有`type-c`转接口，一样可以用`Micro USB`充电/连接电脑

### 类适配器

1.首先定义`M4DataLine` 代表是`Micro USB`，我们目的就是通过适配器能够用米4数据线连接米5手机

```java
class M4DataLine {
    public void connection() {
        System.out.println("使用小米4数据线连接...");
    }
}
```

2.定义客户端使用的接口，与业务相关

```java
interface Target {
    void connection();
}

class M5DataLine implements Target {
    @Override
    public void connection() {
        System.out.println("使用小米5数据线连接...");
    }
}
```

3.创建适配器类，继承了被适配类，同时实现标准接口

```java
class M5DataLineAdapter extends M4DataLine implements Target {

    @Override
    public void connection() {
        System.out.println("插入 type-c 转接头");
        super.connection();
    }
}
```

4.客户端代码，测试

```java
public class AdapterMain {

    public static void main(String[] args) {
        Target target = new M5DataLine();
        target.connection();

        Target adapter = new M5DataLineAdapter();
        adapter.connection();
    }
}
```

5.结果

```
使用小米5数据线连接...
插入 type-c 转接头
使用小米4数据线连接...
```

### 对象适配器

创建适配器类，实现标准接口，将这个调用委托给实现新接口的对象来处理

```java
class M5DataLineAdapter implements Target { // 这里不再继承M4DataLine类

    private Target target;// 关联关系-聚合

    public M5DataLineAdapter(Target target) {
        this.target = target;
    }

    @Override
    public void connection() {
        System.out.println("插入 type-c 转接头");
        target.connection();
    }
}

public class AdapterMain {

    public static void main(String[] args) {
        // 使用特殊功能类，即适配类
        Target adapter = new M5DataLineAdapter(new M5DataLine());
        adapter.connection();
    }
}
```

### 接口适配器

**核心思路**：当不需要全部实现接口提供的方法时，可先设计一个抽象类实现接口，并为该接口中每个方法提供 一个默认实现（空方法），那么该抽象类的子类可有选择地覆盖父类的某些方法来实现需求

适用于一个接口不想使用其所有的方法的情况。

```java
public interface Interface4 {
    public void m1();

    public void m2();

    public void m3();

    public void m4();
}
```

```java
public abstract class AbsAdapter implements Interface4 {
    //默认实现 
    public void m1() { }

    public void m2() { }

    public void m3() { }

    public void m4() { }
}
```

```java
public class Client {
    public static void main(String[] args) {
        AbsAdapter absAdapter = new AbsAdapter() {
            //只需要去覆盖我们 需要使用 接口方法
            @Override
            public void m1 () {
                // TODOAuto-generated method stub
                System.out.println("使用了m1 的方法");
            }
        };
        absAdapter.m1();
    }
}
```



### 区别

类适配器：对象继承的方式，静态的定义。

对象适配器：依赖于对象的组合，都是采用对象组合的方式，也就是对象适配器实现的方式。

接口适配器：将需要适配的看做接口，实现部分方法